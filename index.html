<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WAV_V2.2 ‚Äî Watcher AI Vertical</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<style>
  html,body { margin:0; padding:0; background:#05070c; overflow:hidden; font-family:monospace; }
  canvas { display:block; width:100vw; height:100vh; background:#05070c; touch-action:none; }

  /* Overlays */
  .overlay {
    position:fixed; inset:0; background:#000a; display:grid; place-items:center;
    color:#bffcff; text-align:center;
  }
  .overlay h1 {
    margin:0 0 16px; color:#ff59d1;
    text-shadow:0 0 20px #ff59d1, 0 0 10px #25f3ff;
  }
  .overlay button {
    margin-top:20px; border:3px solid #25f3ff; color:#25f3ff;
    background:#000; padding:14px 32px; font-size:22px;
    border-radius:12px; font-family:inherit;
    box-shadow:0 0 12px #25f3ff80;
  }
  .overlay img {
    max-width:60%; margin:20px auto; display:block;
    border-radius:12px; box-shadow:0 0 20px #25f3ff;
    animation: glowPulse 2.4s ease-in-out infinite;
  }
  @keyframes glowPulse {
    0%,100% { box-shadow:0 0 12px #25f3ff; }
    50% { box-shadow:0 0 28px #ff59d1; }
  }

  /* Controls */
  #leftControls {
    position:fixed; bottom:20px; left:20px;
    display:grid; grid-template-columns:70px 70px 70px;
    grid-template-rows:70px 70px; gap:12px;
  }
  #leftControls .btn { grid-column:2; grid-row:1; }
  #leftControls .btn.left { grid-column:1; grid-row:2; }
  #leftControls .btn.down { grid-column:2; grid-row:2; }
  #leftControls .btn.right { grid-column:3; grid-row:2; }
  #leftControls button {
    border:2px solid #25f3ff; color:#25f3ff; background:#000c;
    border-radius:8px; font-size:22px;
    box-shadow:0 0 10px #25f3ff80;
  }

  #fireBtn {
    position:fixed; bottom:40px; right:40px;
    border:3px solid #25f3ff; color:#25f3ff; background:#000c;
    border-radius:50%; width:90px; height:90px; font-size:28px;
    box-shadow:0 0 12px #25f3ff80;
  }
  #pauseBtn {
    position:fixed; top:20px; right:20px;
    border:3px solid #25f3ff; color:#25f3ff; background:#000c;
    border-radius:8px; padding:10px 16px; font-size:18px;
    box-shadow:0 0 8px #25f3ff80;
  }
</style>
</head>
<body>
  <canvas id="c"></canvas>

  <!-- Start Screen -->
  <div id="start" class="overlay">
    <div>
      <h1>WAV_V2.2</h1>
      <div>Watcher AI Vertical ‚Äî Blade Digital</div>
      <img src="star_ship.png" alt="Neon Ship">
      <button onclick="startGame()">‚ñ∂ Start</button>
    </div>
  </div>

  <!-- Game Over -->
  <div id="gameover" class="overlay" style="display:none">
    <div>
      <h1>üíÄ GAME OVER üíÄ</h1>
      <div id="finalScore">Final Score: 0</div>
      <button onclick="restartGame()">‚Üª Restart</button>
    </div>
  </div>

  <!-- Mobile Controls -->
  <div id="leftControls">
    <button class="btn" id="up">‚¨ÜÔ∏é</button>
    <button class="btn left" id="left">‚¨ÖÔ∏é</button>
    <button class="btn down" id="down">‚¨áÔ∏é</button>
    <button class="btn right" id="right">‚û°Ô∏é</button>
  </div>
  <button id="fireBtn">‚ö°</button>
  <button id="pauseBtn">‚è∏</button>

<script>
const canvas=document.getElementById('c'),ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});

let running=false,paused=false,score=0,lives=3;
let W=canvas.width,H=canvas.height;
const grid={y:0,speed:2};

// Ship
const ship={x:W/2,y:H*0.8,w:26,h:28,vx:0,vy:0,ax:0,ay:0,maxV:6,accel:0.9,friction:0.88};

// Arrays
const shots=[],enemies=[],explosions=[];
function fire(){const now=performance.now();if(fire.last&&now-fire.last<140)return;fire.last=now;shots.push({x:ship.x,y:ship.y-ship.h/2,vy:-10});}
function spawnEnemy(){const size=20+Math.random()*20;enemies.push({x:Math.random()*(W-40)+20,y:-size,w:size,h:size,vy:2+Math.random()*2});}
function spawnExplosion(x,y){explosions.push({x,y,r:2,max:30});}

// Boss
let boss=null;let bossShots=[];
function spawnBoss(){boss={x:W/2,y:80,w:140,h:60,vx:2,hp:40,maxHp:40,alive:true};bossShots.length=0;}
function updateBoss(){if(!boss||!boss.alive)return;boss.x+=boss.vx;if(boss.x<boss.w/2||boss.x>W-boss.w/2)boss.vx*=-1;if(Math.random()<0.02)bossShots.push({x:boss.x,y:boss.y+boss.h/2,vy:4});for(let i=bossShots.length-1;i>=0;i--){bossShots[i].y+=bossShots[i].vy;if(bossShots[i].y>H)bossShots.splice(i,1);}for(let j=shots.length-1;j>=0;j--){if(Math.abs(shots[j].x-boss.x)<boss.w/2&&Math.abs(shots[j].y-boss.y)<boss.h/2){shots.splice(j,1);boss.hp--;spawnExplosion(boss.x+(Math.random()*40-20),boss.y);if(boss.hp<=0){boss.alive=false;score+=500;spawnExplosion(boss.x,boss.y);}}}for(let i=bossShots.length-1;i>=0;i--){if(Math.abs(bossShots[i].x-ship.x)<ship.w&&Math.abs(bossShots[i].y-ship.y)<ship.h){bossShots.splice(i,1);spawnExplosion(ship.x,ship.y);lives--;if(lives<=0)gameOver();}}if(Math.abs(ship.x-boss.x)<(ship.w/2+boss.w/2)&&Math.abs(ship.y-boss.y)<(ship.h/2+boss.h/2)){spawnExplosion(ship.x,ship.y);lives=0;gameOver();}}

// Input
const keys={};
window.addEventListener('keydown',e=>{keys[e.key.toLowerCase()]=true;if(e.key===' '||e.key==='Enter')fire();if(e.key.toLowerCase()==='p')togglePause();if(!running&&e.key.toLowerCase()==='r')restartGame();});
window.addEventListener('keyup',e=>{keys[e.key.toLowerCase()]=false;});

// Mobile
document.getElementById('left').ontouchstart=()=>keys['arrowleft']=true;
document.getElementById('left').ontouchend=()=>keys['arrowleft']=false;
document.getElementById('right').ontouchstart=()=>keys['arrowright']=true;
document.getElementById('right').ontouchend=()=>keys['arrowright']=false;
document.getElementById('up').ontouchstart=()=>keys['arrowup']=true;
document.getElementById('up').ontouchend=()=>keys['arrowup']=false;
document.getElementById('down').ontouchstart=()=>keys['arrowdown']=true;
document.getElementById('down').ontouchend=()=>keys['arrowdown']=false;
document.getElementById('fireBtn').ontouchstart=fire;
document.getElementById('pauseBtn').ontouchstart=togglePause;

function togglePause(){if(!running)return;paused=!paused;if(!paused)requestAnimationFrame(loop);}

// Update
function update(){
  ship.ax=0;ship.ay=0;
  if(keys['arrowleft'])ship.ax-=ship.accel;if(keys['arrowright'])ship.ax+=ship.accel;if(keys['arrowup'])ship.ay-=ship.accel;if(keys['arrowdown'])ship.ay+=ship.accel;
  ship.vx+=ship.ax;ship.vx*=ship.friction;ship.vx=Math.max(-ship.maxV,Math.min(ship.maxV,ship.vx));ship.x+=ship.vx;
  ship.vy+=ship.ay;ship.vy*=ship.friction;ship.vy=Math.max(-ship.maxV,Math.min(ship.maxV,ship.vy));ship.y+=ship.vy;
  ship.x=Math.max(ship.w/2,Math.min(W-ship.w/2,ship.x));ship.y=Math.max(ship.h/2,Math.min(H-ship.h/2,ship.y));
  for(let i=shots.length-1;i>=0;i--){shots[i].y+=shots[i].vy;if(shots[i].y<-20)shots.splice(i,1);}
  for(let i=enemies.length-1;i>=0;i--){enemies[i].y+=enemies[i].vy;if(enemies[i].y>H+50)enemies.splice(i,1);}
  for(let i=enemies.length-1;i>=0;i--){for(let j=shots.length-1;j>=0;j--){if(Math.abs(shots[j].x-enemies[i].x)<enemies[i].w/2&&Math.abs(shots[j].y-enemies[i].y)<enemies[i].h/2){spawnExplosion(enemies[i].x,enemies[i].y);enemies.splice(i,1);shots.splice(j,1);score+=20;break;}}}
  for(let i=enemies.length-1;i>=0;i--){if(Math.abs(ship.x-enemies[i].x)<(ship.w/2+enemies[i].w/2)&&Math.abs(ship.y-enemies[i].y)<(ship.h/2+enemies[i].h/2)){spawnExplosion(ship.x,ship.y);enemies.splice(i,1);lives--;if(lives<=0)gameOver();}}
  for(let i=explosions.length-1;i>=0;i--){explosions[i].r+=2;if(explosions[i].r>explosions[i].max)explosions.splice(i,1);}
  grid.y+=grid.speed;if(grid.y>=40)grid.y=0;score+=0.1;if(Math.random()<0.02)spawnEnemy();if(!boss&&score>0&&Math.floor(score)%1000===0)spawnBoss();if(boss)updateBoss();
}

// Draw
function glowRect(x,y,w,h,fill,shadow){ctx.save();ctx.shadowBlur=shadow;ctx.shadowColor=fill;ctx.fillStyle=fill;ctx.fillRect(x-w/2,y-h/2,w,h);ctx.restore();}
function drawGrid(){ctx.save();ctx.globalAlpha=0.55;ctx.strokeStyle='#12243a';for(let x=0;x<=W;x+=40){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,H);ctx.stroke();}ctx.strokeStyle='#1be1ff';ctx.shadowBlur=12;ctx.shadowColor='#1be1ff';for(let y=grid.y;y<H;y+=40){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke();}ctx.restore();}
function drawShip(){glowRect(ship.x,ship.y,12,28,'#25f3ff',18);glowRect(ship.x-14,ship.y+4,10,6,'#ff59d1',12);glowRect(ship.x+14,ship.y+4,10,6,'#ff59d1',12);glowRect(ship.x,ship.y,4,14,'#ffa133',8);}
function drawShots(){ctx.save();ctx.fillStyle='#b6f7ff';ctx.shadowBlur=16;ctx.shadowColor='#b6f7ff';shots.forEach(s=>ctx.fillRect(s.x-2,s.y-8,4,12));ctx.restore();}
function drawEnemies(){ctx.save();ctx.fillStyle='#ff7733';ctx.shadowBlur=20;ctx.shadowColor='#ff4411';enemies.forEach(e=>{ctx.beginPath();ctx.arc(e.x,e.y,e.w/2,0,Math.PI*2);ctx.fill();});ctx.restore();}
function drawExplosions(){ctx.save();ctx.fillStyle='#ffff66';ctx.shadowBlur=30;ctx.shadowColor='#ff0';explosions.forEach(ex=>{ctx.beginPath();ctx.arc(ex.x,ex.y,ex.r,0,Math.PI*2);ctx.fill();});ctx.restore();}
function drawBoss(){if(!boss||!boss.alive)return;ctx.save();ctx.fillStyle='#ff0077';ctx.shadowBlur=30;ctx.shadowColor='#ff0077';ctx.fillRect(boss.x-boss.w/2,boss.y-boss.h/2,boss.w,boss.h);ctx.restore();ctx.save();ctx.fillStyle='#111';ctx.fillRect(W/2-100,20,200,12);ctx.fillStyle='#ff0077';ctx.fillRect(W/2-100,20,(boss.hp/boss.maxHp)*200,12);ctx.strokeStyle='#fff';ctx.strokeRect(W/2-100,20,200,12);ctx.restore();ctx.save();ctx.fillStyle='#f00';ctx.shadowBlur=12;ctx.shadowColor='#f55';bossShots.forEach(b=>ctx.fillRect(b.x-3,b.y-8,6,16));ctx.restore();}
function drawHUD(){ctx.save();ctx.fillStyle='#cfefff';ctx.font='16px monospace';ctx.fillText('Score: '+Math.floor(score),12,24);ctx.fillText('Lives: '+lives,12,44);ctx.restore();}

// Loop
function loop(){if(!running||paused)return;update();ctx.clearRect(0,0,W,H);drawGrid();drawShip();drawShots();drawEnemies();drawExplosions();drawHUD();drawBoss();requestAnimationFrame(loop);}
function startGame(){document.getElementById('start').style.display='none';document.getElementById('gameover').style.display='none';running=true;paused=false;score=0;lives=3;shots.length=0;enemies.length=0;explosions.length=0;boss=null;bossShots.length=0;W=canvas.width;H=canvas.height;ship.x=W/2;ship.y=H*0.8;ship.vx=0;ship.vy=0;requestAnimationFrame(loop);}
function gameOver(){running=false;document.getElementById('finalScore').innerText="Final Score: "+Math.floor(score);document.getElementById('gameover').style.display='grid';}
function restartGame(){startGame();}
</script>
</body>
</html>
